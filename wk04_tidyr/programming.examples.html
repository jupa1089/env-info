<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Naomi Tague" />

<meta name="date" content="2016-01-28" />

<title>Programming-Notes</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/cosmo.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>

<!-- http://www.favicon-generator.org/ -->
<link rel="apple-touch-icon" sizes="57x57" href="favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
<link rel="manifest" href="favicons/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="../favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

<link href="libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet">
<script src="libs/tocify-1.9.1/jquery-ui-1.9.2.custom.min.js"></script>
<script src="libs/tocify-1.9.1/jquery.tocify.min.js"></script>

<link href="libs/lightbox-2.8.2/css/lightbox.min.css" rel="stylesheet">

<style type="text/css">
@media (max-width: 992px) {
#toc {
  position: relative;
  width: 100%;
  margin: 0px 0px 20px 0px;
}
}
</style>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="libs/highlight/textmate.css"
      type="text/css" />
<script src="libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>


<link rel="stylesheet" href="libs/font-awesome-4.5.0/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="libs/octicons-3.3.0/octicons.css" type="text/css" />
<link rel="stylesheet" href="styles/styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<!--- https://codepo8.github.io/css-fork-on-github-ribbon/ -->
<style>#forkongithub a{background:#000;color:#fff;text-decoration:none;font-family:arial,sans-serif;text-align:center;font-weight:bold;padding:5px 40px;font-size:1rem;line-height:2rem;position:relative;transition:0.5s;}#forkongithub a:hover{background:#c11;color:#fff;}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;top:1px;left:0;height:1px;background:#fff;}#forkongithub a::after{bottom:1px;top:auto;}@media screen and (min-width:800px){#forkongithub{position:fixed;display:block;top:0;left:0;width:200px;overflow:hidden;height:200px;z-index:9999;}#forkongithub a{width:200px;position:absolute;top:60px;left:-60px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-o-transform:rotate(-45deg);box-shadow:4px 4px 10px rgba(0,0,0,0.8);}}</style><span id="forkongithub"><a href="https://github.com/ucsb-bren/env-info">Fork me on GitHub</a></span>
<div class="row-fluid">
<div class="navbar navbar-default navbar-fixed-top navbar-transparent">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand"><i class="fa fa-home"></i> env-info</a>
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div class="navbar-collapse collapse" id="navbar-main">
      <!--
      <ul class="nav navbar-nav">
        <li>
          <a href="/#schedule"><i class="fa fa-calendar"></i> schedule</a>
        </li>
      </ul>
      -->
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/students"><i class="fa fa-users"></i> students</a></li>
      </ul>
    </div>
  </div>
</div>
</div>

<div class="row-fluid">
  <div class="span3 col-md-3">
    <div id="toc"></div>
  </div>
  <div class="main-content span9 col-md-9">

<div id="header">
<h1 class="title">Programming-Notes</h1>
<h4 class="author"><em>Naomi Tague</em></h4>
<h4 class="date"><em>January 28, 2016</em></h4>
</div>


<div id="code-from-inclass-examples" class="section level2">
<h2>Code from inclass examples</h2>
<p>Working with data types and functions</p>
<pre class="r"><code># create a function that computes power generated from a reservoir
power_gen = function(height, flow, rho=1000, g=9.8, Keff=0.8) {
result = rho * height * flow * g * Keff
return(result)
} 

# examples of function use
power_gen(20,1)</code></pre>
<pre><code>## [1] 156800</code></pre>
<pre class="r"><code>power_gen(height=20, flow=1)</code></pre>
<pre><code>## [1] 156800</code></pre>
<pre class="r"><code>power.estimate = power_gen(height=20,flow=1)
power.estimate</code></pre>
<pre><code>## [1] 156800</code></pre>
</div>
<div id="scoping" class="section level2">
<h2>Scoping</h2>
</div>
<div id="nicely-documented-function" class="section level2">
<h2>Nicely documented function</h2>
<pre class="r"><code>#&#39; Power Required by Speed
#&#39;
#&#39; This function determines the power required to keep a vehicle moving
#&#39; a given speed
#&#39; @param cdrag coefficient due to drag default=0.3
#&#39; @param crolling coefficient due to rolling/friction default=0.015
#&#39; @param v vehicle speed (m/2)
#&#39; @param m vehicle mass (kg)
#&#39; @param A area of front of vehicle (m2)
#&#39; @param g acceleration due to gravity (m/s) default=9.8
#&#39; @param pair (kg/m3) default =1.2
#&#39; @return power (W)
power = function(cdrag=0.3, crolling=0.015,pair=1.2,g=9.8,V,m,A) {
P = crolling*m*g*V + 1/2*A*pair*cdrag*V**3
return(P)
}

v=seq(from=0, to=100, by=10)
plot(v, power(V=0.447*v, m=31752, A=25))
lines(v, power(V=0.447*v, m=61752, A=25)) </code></pre>
<p><img src="tmp_files/figure-html/speed-1.png" /><!-- --> ## Data types in R (that you can exchange with functions)</p>
<pre class="r"><code>mth.names=c(&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;Jul&quot;,&quot;Aug&quot;,&quot;Sep&quot;,&quot;Oct&quot;
,&quot;Nov&quot;,&quot;Dec&quot;)
reservoir.operation = data.frame(month=mth.names)
reservoir.operation$height = seq(from=32, to=10, by=-2)
reservoir.operation$flowrate = rnorm(n=12, mean=3, sd=0.25)

barplot( power_gen(height=reservoir.operation$height, flow=reservoir.operation$flow), names=reservoir.operation$month)</code></pre>
<p><img src="tmp_files/figure-html/datafunctions-1.png" /><!-- --></p>
</div>
<div id="using-other-functions-within-a-function" class="section level2">
<h2>Using other functions within a function</h2>
<pre class="r"><code>#&#39;
#&#39; This function computes total power generation from a reservoir given its height and flow rate into turbines and number of days (and secs) within those days that the turbines are in operation
#&#39; @param rho Density of water (kg/m3) Default is 1000
#&#39; @param g Acceleration due to gravity (m/sec2) Default is 9.8
#&#39; @param Keff Turbine Efficiency (0-1) Default is 0.8
#&#39; @param height height of water in reservoir (m)
#&#39; @param flow flow rate (m3/sec)
#&#39; @param number of days
#&#39; @param secs in days Default is 86400
#&#39; @author Naomi
#&#39; @examples power_gen(20, 1, 10)
#&#39; @return Power generation (MW)

power_gen_total = function(height, flow, days, secs=86400, rho=1000, g=9.8, Keff=0.8) {

result = rho * height * flow * g * Keff
result = result * days * secs
total =  sum(result)/1e6

return(total)
}

 power_gen_total(reservoir.operation$height, reservoir.operation$flowrate, days=30)</code></pre>
<pre><code>## [1] 15138407</code></pre>
</div>
<div id="using-lists-to-return-multiple-data-types-from-a-function" class="section level2">
<h2>Using lists to return multiple data types from a function</h2>
<pre class="r"><code>#&#39; computes profit from  price for forest plot  and Mg/C in that plot
#&#39; @param  price ($)
#&#39; @param  carbon (MgC)
#&#39; @return list with mean, min, and max prices
compute_carbonvalue = function(price, carbon) {

cost.per.carbon = price/carbon
a = mean(cost.per.carbon)
b = max(cost.per.carbon)
c = min(cost.per.carbon)

result = list(avg=a, min=c, max=b)
return(result)
}
# example application, using some data that we &#39;generate&#39;
obs=data.frame(prices=c(23,44,60,4,2,33,59), forestc=c(59,88,100,10,8,79,300) )
obs</code></pre>
<pre><code>##   prices forestc
## 1     23      59
## 2     44      88
## 3     60     100
## 4      4      10
## 5      2       8
## 6     33      79
## 7     59     300</code></pre>
<pre class="r"><code>forestvalue = compute_carbonvalue(obs$prices, obs$forestc)
forestvalue</code></pre>
<pre><code>## $avg
## [1] 0.3934598
## 
## $min
## [1] 0.1966667
## 
## $max
## [1] 0.6</code></pre>
</div>

  </div> <!--span-9-->
</div> <!--row-fluid-->

<!--
<script src="{{ site.baseurl }}/libs/lightbox-2.8.2/js/lightbox.min.js"></script>

<script>
    lightbox.option({
      'albumLabel': 'Example %1 of %2',
      'resizeDuration': 200,
      'fadeDuration': 200,
      'wrapAround': true
    })
</script>
-->

<style type="text/css">
.main-container {
  max-width: none;
}
</style>

<script>
$(function() {
    var toc = $("#toc").tocify({
      selectors: "h2,h3",
      theme: "bootstrap3",
      context: '.main-content',
      hashGenerator: 'pretty',
      showAndHide: false
    }).data("toc-tocify");
    $(".optionName").popover({ trigger: "hover" });
});
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
